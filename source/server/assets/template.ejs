<!doctype html>
<html lang='en' <%- htmlAttributes.toString() %>>
  <head>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8' charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <meta name='apple-mobile-web-app-status-bar-style' content='<%- accentColor %>'>
    <meta name='msapplication-navbutton-color' content='<%- accentColor %>'>
    <meta name='msapplication-TileColor' content='<%- accentColor %>'>
    <meta name='theme-color' content='<%- accentColor %>'>
    <meta name='mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='msapplication-tap-highlight' content='no'>
    <meta name='full-screen' content='yes'>
    <meta name='browsermode' content='application'>

    <% if (manifest) { %>
      <link rel='manifest' href='/<%- manifest  %>'>
    <% } %>

    <%- title.toString() %>
    <%- meta.toString() %>
    <%- link.toString() %>

    <%- styleTags %>

    <link
      href='<%- stats.assetsByChunkName.main[0] %>'
      rel="preload"
      as="style"
      onload="this.rel='stylesheet'"
    >

    <% styles.map(({ publicPath }) => { %>
      <link
        href='<%- publicPath %>'
        rel="preload"
        as="style"
        onload="this.rel='stylesheet'"
      >
    <% }) %>
  </head>
  <body <%- bodyAttributes.toString() %>>
    <div id='root' role='application'><%- content %></div>

    <script>
      window.__APOLLO_STATE__=<%- JSON.stringify(apolloState).replace(/</g, '\\u003c') %>
      window.__REDUX_STATE__=<%- JSON.stringify(reduxState).replace(/</g, '\\u003c') %>
    </script>

    <script src='<%- stats.assetsByChunkName.main[1] %>' defer></script>

    <% scripts.map(({ publicPath }) => { %>
      <script src='<%- publicPath %>' defer></script>
    <% }) %>
  </body>
</html>
